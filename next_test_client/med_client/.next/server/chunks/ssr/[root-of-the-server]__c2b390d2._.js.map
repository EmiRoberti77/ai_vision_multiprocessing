{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///mnt/c/code/AI_Vision/multiprocessing/next_test_client/med_client/src/app/Viewer/viewer.tsx"],"sourcesContent":["'use client';\nimport { useState } from 'react';\n\nexport default function Viewer() {\n  const [src] = useState('http://localhost:8000/stream/mjpg?fps=15&quality=80');\n\n  return (\n    <div className=\"relative w-full h-full rounded-md border overflow-hidden bg-black\">\n      {/* Live image */}\n      <img\n        src={src}\n        alt=\"Live stream\"\n        className=\"absolute inset-0 block w-full h-full object-contain select-none\"\n      />\n      {/* Overlay label - always above the image */}\n      <div className=\"absolute top-2 left-2 z-20 px-2 py-1 rounded bg-black/65 text-white text-[11px]\">\n        OAIX_MEDIA_SERVER v1.0\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AACA;AADA;;;AAGe,SAAS;IACtB,MAAM,CAAC,IAAI,GAAG,IAAA,iNAAQ,EAAC;IAEvB,qBACE,8OAAC;QAAI,WAAU;;0BAEb,8OAAC;gBACC,KAAK;gBACL,KAAI;gBACJ,WAAU;;;;;;0BAGZ,8OAAC;gBAAI,WAAU;0BAAkF;;;;;;;;;;;;AAKvG","debugId":null}},
    {"offset": {"line": 52, "column": 0}, "map": {"version":3,"sources":["file:///mnt/c/code/AI_Vision/multiprocessing/next_test_client/med_client/src/app/page.tsx"],"sourcesContent":["'use client';\n\nimport { useMemo, useState } from 'react';\nimport Viewer from './Viewer/viewer';\n\ntype ApiResponse = {\n  message: string;\n  detections: number;\n  chosen_detection?: { box: [number, number, number, number]; confidence: number; class_id: number };\n  result?: { lot_number: string | null; expiry_date: string | null };\n  artifacts?: { full_frame_path?: string; crop_path?: string; final_path?: string } | null;\n};\n\nexport default function Home() {\n  const [endpoint, setEndpoint] = useState('http://localhost:8000/process?save_artifacts=true');\n  const [data, setData] = useState<ApiResponse | null>(null);\n  const [raw, setRaw] = useState('');\n  const [error, setError] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [lightboxUrl, setLightboxUrl] = useState<string | null>(null);\n\n  const apiBase = useMemo(() => {\n    try { const u = new URL(endpoint); return `${u.protocol}//${u.host}`; }\n    catch { return 'http://localhost:8000'; }\n  }, [endpoint]);\n\n  const toRunsUrl = (p?: string | null) => {\n    if (!p) return undefined;\n    const i = p.lastIndexOf('/runs/');\n    if (i === -1) return undefined;\n    const sub = p.substring(i + '/runs/'.length).replaceAll('\\\\', '/');\n    return `${apiBase}/runs/${sub}?t=${Date.now()}`;\n  };\n\n  const handleSubmit = async () => {\n    setLoading(true); setError(''); setData(null); setRaw('');\n    try {\n      const res = await fetch(endpoint, { method: 'POST', headers: { 'Content-Type': 'application/json' } });\n      const json: ApiResponse = await res.json();\n      setData(json);\n      setRaw(JSON.stringify(json, null, 2));\n      if (!res.ok) setError(`HTTP ${res.status}: ${json?.message ?? 'Request failed'}`);\n    } catch (e: any) { setError(e?.message ?? 'Request failed'); }\n    finally { setLoading(false); }\n  };\n\n  const fullUrl  = toRunsUrl(data?.artifacts?.full_frame_path);\n  const cropUrl  = toRunsUrl(data?.artifacts?.crop_path);\n  const finalUrl = toRunsUrl(data?.artifacts?.final_path);\n\n  return (\n    <div className=\"font-sans min-h-screen bg-gray-50 text-gray-900\">\n      {/* Top bar */}\n      <div className=\"h-10 px-2 py-1 flex items-center gap-2 border-b sticky top-0 bg-gray-50 z-10\">\n        <h1 className=\"text-[12px] font-semibold mr-2\">Medicine OCR</h1>\n        <input\n          className=\"flex-1 rounded-md border px-2 py-1 text-[11px] outline-none focus:ring-1 focus:ring-blue-500\"\n          value={endpoint}\n          onChange={(e) => setEndpoint(e.target.value)}\n          placeholder=\"http://localhost:8000/process?save_artifacts=true\"\n        />\n        <button\n          onClick={handleSubmit}\n          disabled={loading}\n          className=\"rounded-md px-3 py-1 text-[11px] bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-50\"\n        >\n          {loading ? 'Processing…' : 'Submit'}\n        </button>\n      </div>\n\n      <main className=\"px-2 py-2\">\n        <div className=\"grid grid-cols-12 gap-3\">\n          {/* LEFT: 50% player / 50% thumbnails row */}\n          <div className=\"col-span-8 lg:col-span-9\">\n            {/* Reference height so percentages apply; page can scroll */}\n            <div className=\"grid gap-2 h-[110vh] grid-rows-[50%_50%]\">\n              {/* Player (clipped, overlay visible) */}\n              <Viewer />\n\n              {/* Thumbnails row: three equal cards, each clips its image */}\n              <div className=\"grid grid-cols-3 gap-2 h-full\">\n                {[\n                  { url: fullUrl,  label: 'Full'  },\n                  { url: cropUrl,  label: 'Crop'  },\n                  { url: finalUrl, label: 'Final' },\n                ].map(({ url, label }) => (\n                  <button\n                    key={label}\n                    type=\"button\"\n                    onClick={() => url && setLightboxUrl(url)}\n                    className=\"group h-full w-full\"\n                    title={label}\n                  >\n                    <div className=\"h-full w-full rounded-md border overflow-hidden bg-black\">\n                      {url ? (\n                        <img\n                          src={url}\n                          alt={label}\n                          className=\"block w-full h-full object-contain transition-transform group-hover:scale-[1.01]\"\n                        />\n                      ) : (\n                        <span className=\"flex items-center justify-center w-full h-full text-[11px] text-gray-400\">\n                          {label}: n/a\n                        </span>\n                      )}\n                    </div>\n                  </button>\n                ))}\n              </div>\n            </div>\n          </div>\n\n          {/* RIGHT: results (scrolls independently if tall) */}\n          <div className=\"col-span-4 lg:col-span-3 rounded-md border bg-white p-2 text-[11px] leading-tight max-h-[110vh] overflow-auto\">\n          {error && (\n            <div className=\"mb-2 rounded-md bg-red-50 border border-red-200 px-2 py-1 text-red-700\">{error}</div>\n          )}\n\n          {data ? (\n            <div className=\"space-y-2\">\n              {/* Header */}\n              <div className=\"flex items-center justify-between\">\n                <div className=\"text-[12px] font-medium\">Result</div>\n                <span className=\"rounded-full bg-gray-100 px-2 py-[2px] text-[10px]\">{data.message}</span>\n              </div>\n\n              {/* === Predictions / Confidence / Stats (added back) === */}\n              <section className=\"rounded-md border p-2 space-y-2\">\n                <div className=\"text-[11px] font-medium\">Predictions</div>\n\n                <div className=\"grid grid-cols-2 gap-2\">\n                  <div className=\"rounded border p-2\">\n                    <div className=\"text-[10px] text-gray-500\">Detections</div>\n                    <div className=\"text-sm font-semibold\">{data.detections ?? 0}</div>\n                  </div>\n\n                  <div className=\"rounded border p-2\">\n                    <div className=\"text-[10px] text-gray-500\">Confidence</div>\n                    <div className=\"text-sm font-semibold\">\n                      {data?.chosen_detection?.confidence !== undefined\n                        ? `${Math.round(data.chosen_detection.confidence * 100)}%`\n                        : '—'}\n                    </div>\n                  </div>\n\n                  <div className=\"rounded border p-2\">\n                    <div className=\"text-[10px] text-gray-500\">Class ID</div>\n                    <div className=\"text-sm font-semibold\">\n                      {data?.chosen_detection?.class_id ?? '—'}\n                    </div>\n                  </div>\n\n                  <div className=\"rounded border p-2 col-span-2\">\n                    <div className=\"text-[10px] text-gray-500\">Box</div>\n                    <div className=\"font-mono text-[10px]\">\n                      {data?.chosen_detection?.box\n                        ? `[${data.chosen_detection.box.join(', ')}]`\n                        : '—'}\n                    </div>\n                  </div>\n                </div>\n\n                {/* Stats row (extend if backend returns more like processing_ms, model, etc.) */}\n                <div className=\"grid grid-cols-2 gap-2\">\n                  <div className=\"rounded border p-2\">\n                    <div className=\"text-[10px] text-gray-500\">Lot</div>\n                    <div className=\"text-sm font-semibold\">{data?.result?.lot_number ?? '—'}</div>\n                  </div>\n                  <div className=\"rounded border p-2\">\n                    <div className=\"text-[10px] text-gray-500\">Expiry</div>\n                    <div className=\"text-sm font-semibold\">{data?.result?.expiry_date ?? '—'}</div>\n                  </div>\n                </div>\n              </section>\n\n              {/* Artifacts list (optional; server paths) */}\n              {data.artifacts && (\n                <section className=\"rounded-md border p-2 space-y-1\">\n                  <div className=\"text-[11px] font-medium\">Artifacts</div>\n                  <ul className=\"list-disc ml-4 font-mono text-[10px] break-all space-y-[2px]\">\n                    {data.artifacts.full_frame_path && <li>full: {data.artifacts.full_frame_path}</li>}\n                    {data.artifacts.crop_path && <li>crop: {data.artifacts.crop_path}</li>}\n                    {data.artifacts.final_path && <li>final: {data.artifacts.final_path}</li>}\n                  </ul>\n                </section>\n              )}\n\n              {/* Raw JSON (stays last) */}\n              <details className=\"rounded-md border p-2\">\n                <summary className=\"cursor-pointer select-none text-[10px]\">Raw JSON</summary>\n                <pre className=\"mt-2 text-[10px] bg-gray-50 p-2 rounded overflow-auto max-h-60\">\n                  {JSON.stringify(data, null, 2)}\n                </pre>\n              </details>\n            </div>\n          ) : (\n            <div className=\"text-gray-500 text-[12px]\">Run a request to see results.</div>\n          )}\n          </div>\n        </div>\n      </main>\n\n      {/* Fullscreen lightbox */}\n      {lightboxUrl && (\n        <button\n          type=\"button\"\n          onClick={() => setLightboxUrl(null)}\n          className=\"fixed inset-0 z-50 bg-black/80 flex items-center justify-center p-4\"\n          title=\"Close\"\n        >\n          <img src={lightboxUrl} alt=\"Preview\" className=\"max-w-[95vw] max-h-[95vh] object-contain rounded-md shadow-2xl\" />\n        </button>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 599, "column": 0}, "map": {"version":3,"sources":["file:///mnt/c/code/AI_Vision/multiprocessing/next_test_client/med_client/node_modules/next/src/server/route-modules/app-page/module.compiled.js"],"sourcesContent":["if (process.env.NEXT_RUNTIME === 'edge') {\n  module.exports = require('next/dist/server/route-modules/app-page/module.js')\n} else {\n  if (process.env.__NEXT_EXPERIMENTAL_REACT) {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.prod.js')\n      }\n    }\n  } else {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.prod.js')\n      }\n    }\n  }\n}\n"],"names":["process","env","NEXT_RUNTIME","module","exports","require","__NEXT_EXPERIMENTAL_REACT","NODE_ENV","TURBOPACK"],"mappings":"AAAA,IAAIA,QAAQC,GAAG,CAACC,YAAY,KAAK,QAAQ;;KAElC;IACL,IAAIF,QAAQC,GAAG,CAACK,yBAAyB,EAAE;;SAcpC;QACL,IAAIN,QAAQC,GAAG,CAACM,QAAQ,KAAK,WAAe;YAC1C,IAAIP,QAAQC,GAAG,CAACO,SAAS,eAAE;gBACzBL,OAAOC,OAAO,GAAGC,QAAQ;YAC3B,OAAO;;QAGT,OAAO;;IAOT;AACF","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 618, "column": 0}, "map": {"version":3,"sources":["file:///mnt/c/code/AI_Vision/multiprocessing/next_test_client/med_client/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.ts"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactJsxDevRuntime\n"],"names":["module","exports","require","vendored","ReactJsxDevRuntime"],"mappings":"AAAAA,OAAOC,OAAO,GACZC,QAAQ,4HACRC,QAAQ,CAAC,YAAY,CAAEC,kBAAkB","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 623, "column": 0}, "map": {"version":3,"sources":["file:///mnt/c/code/AI_Vision/multiprocessing/next_test_client/med_client/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react.ts"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.React\n"],"names":["module","exports","require","vendored","React"],"mappings":"AAAAA,OAAOC,OAAO,GACZC,QAAQ,4HACRC,QAAQ,CAAC,YAAY,CAAEC,KAAK","ignoreList":[0],"debugId":null}}]
}