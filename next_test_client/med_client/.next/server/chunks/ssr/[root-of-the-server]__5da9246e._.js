module.exports=[18622,(a,b,c)=>{b.exports=a.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},42602,(a,b,c)=>{"use strict";b.exports=a.r(18622)},87924,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactJsxRuntime},72131,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].React},40777,a=>{"use strict";a.s(["default",()=>e],40777);var b=a.i(87924),c=a.i(72131);function d(){let[a]=(0,c.useState)("http://localhost:8000/stream/mjpg?fps=15&quality=80");return(0,b.jsxs)("div",{className:"relative w-full h-full rounded-md border overflow-hidden bg-black",children:[(0,b.jsx)("img",{src:a,alt:"Live stream",className:"absolute inset-0 block w-full h-full object-contain select-none"}),(0,b.jsx)("div",{className:"absolute top-2 left-2 z-20 px-2 py-1 rounded bg-black/65 text-white text-[11px]",children:"OAIX_MEDIA_SERVER v1.0"})]})}function e(){let[a,e]=(0,c.useState)("http://localhost:8000/process?save_artifacts=true"),[f,g]=(0,c.useState)(null),[h,i]=(0,c.useState)(""),[j,k]=(0,c.useState)(""),[l,m]=(0,c.useState)(!1),[n,o]=(0,c.useState)(null),p=(0,c.useMemo)(()=>{try{let b=new URL(a);return`${b.protocol}//${b.host}`}catch{return"http://localhost:8000"}},[a]),q=a=>{if(!a)return;let b=a.lastIndexOf("/runs/");if(-1===b)return;let c=a.substring(b+6).replaceAll("\\","/");return`${p}/runs/${c}?t=${Date.now()}`},r=async()=>{m(!0),k(""),g(null),i("");try{let b=await fetch(a,{method:"POST",headers:{"Content-Type":"application/json"}}),c=await b.json();g(c),i(JSON.stringify(c,null,2)),b.ok||k(`HTTP ${b.status}: ${c?.message??"Request failed"}`)}catch(a){k(a?.message??"Request failed")}finally{m(!1)}},s=q(f?.artifacts?.full_frame_path),t=q(f?.artifacts?.crop_path),u=q(f?.artifacts?.final_path);return(0,b.jsxs)("div",{className:"font-sans min-h-screen bg-gray-50 text-gray-900",children:[(0,b.jsxs)("div",{className:"h-10 px-2 py-1 flex items-center gap-2 border-b sticky top-0 bg-gray-50 z-10",children:[(0,b.jsx)("h1",{className:"text-[12px] font-semibold mr-2",children:"Medicine OCR"}),(0,b.jsx)("input",{className:"flex-1 rounded-md border px-2 py-1 text-[11px] outline-none focus:ring-1 focus:ring-blue-500",value:a,onChange:a=>e(a.target.value),placeholder:"http://localhost:8000/process?save_artifacts=true"}),(0,b.jsx)("button",{onClick:r,disabled:l,className:"rounded-md px-3 py-1 text-[11px] bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-50",children:l?"Processing…":"Submit"})]}),(0,b.jsx)("main",{className:"px-2 py-2",children:(0,b.jsxs)("div",{className:"grid grid-cols-12 gap-3",children:[(0,b.jsx)("div",{className:"col-span-8 lg:col-span-9",children:(0,b.jsxs)("div",{className:"grid gap-2 h-[110vh] grid-rows-[50%_50%]",children:[(0,b.jsx)(d,{}),(0,b.jsx)("div",{className:"grid grid-cols-3 gap-2 h-full",children:[{url:s,label:"Full"},{url:t,label:"Crop"},{url:u,label:"Final"}].map(({url:a,label:c})=>(0,b.jsx)("button",{type:"button",onClick:()=>a&&o(a),className:"group h-full w-full",title:c,children:(0,b.jsx)("div",{className:"h-full w-full rounded-md border overflow-hidden bg-black",children:a?(0,b.jsx)("img",{src:a,alt:c,className:"block w-full h-full object-contain transition-transform group-hover:scale-[1.01]"}):(0,b.jsxs)("span",{className:"flex items-center justify-center w-full h-full text-[11px] text-gray-400",children:[c,": n/a"]})})},c))})]})}),(0,b.jsxs)("div",{className:"col-span-4 lg:col-span-3 rounded-md border bg-white p-2 text-[11px] leading-tight max-h-[110vh] overflow-auto",children:[j&&(0,b.jsx)("div",{className:"mb-2 rounded-md bg-red-50 border border-red-200 px-2 py-1 text-red-700",children:j}),f?(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("div",{className:"text-[12px] font-medium",children:"Result"}),(0,b.jsx)("span",{className:"rounded-full bg-gray-100 px-2 py-[2px] text-[10px]",children:f.message})]}),(0,b.jsxs)("section",{className:"rounded-md border p-2 space-y-2",children:[(0,b.jsx)("div",{className:"text-[11px] font-medium",children:"Predictions"}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,b.jsxs)("div",{className:"rounded border p-2",children:[(0,b.jsx)("div",{className:"text-[10px] text-gray-500",children:"Detections"}),(0,b.jsx)("div",{className:"text-sm font-semibold",children:f.detections??0})]}),(0,b.jsxs)("div",{className:"rounded border p-2",children:[(0,b.jsx)("div",{className:"text-[10px] text-gray-500",children:"Confidence"}),(0,b.jsx)("div",{className:"text-sm font-semibold",children:f?.chosen_detection?.confidence!==void 0?`${Math.round(100*f.chosen_detection.confidence)}%`:"—"})]}),(0,b.jsxs)("div",{className:"rounded border p-2",children:[(0,b.jsx)("div",{className:"text-[10px] text-gray-500",children:"Class ID"}),(0,b.jsx)("div",{className:"text-sm font-semibold",children:f?.chosen_detection?.class_id??"—"})]}),(0,b.jsxs)("div",{className:"rounded border p-2 col-span-2",children:[(0,b.jsx)("div",{className:"text-[10px] text-gray-500",children:"Box"}),(0,b.jsx)("div",{className:"font-mono text-[10px]",children:f?.chosen_detection?.box?`[${f.chosen_detection.box.join(", ")}]`:"—"})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,b.jsxs)("div",{className:"rounded border p-2",children:[(0,b.jsx)("div",{className:"text-[10px] text-gray-500",children:"Lot"}),(0,b.jsx)("div",{className:"text-sm font-semibold",children:f?.result?.lot_number??"—"})]}),(0,b.jsxs)("div",{className:"rounded border p-2",children:[(0,b.jsx)("div",{className:"text-[10px] text-gray-500",children:"Expiry"}),(0,b.jsx)("div",{className:"text-sm font-semibold",children:f?.result?.expiry_date??"—"})]})]})]}),f.artifacts&&(0,b.jsxs)("section",{className:"rounded-md border p-2 space-y-1",children:[(0,b.jsx)("div",{className:"text-[11px] font-medium",children:"Artifacts"}),(0,b.jsxs)("ul",{className:"list-disc ml-4 font-mono text-[10px] break-all space-y-[2px]",children:[f.artifacts.full_frame_path&&(0,b.jsxs)("li",{children:["full: ",f.artifacts.full_frame_path]}),f.artifacts.crop_path&&(0,b.jsxs)("li",{children:["crop: ",f.artifacts.crop_path]}),f.artifacts.final_path&&(0,b.jsxs)("li",{children:["final: ",f.artifacts.final_path]})]})]}),(0,b.jsxs)("details",{className:"rounded-md border p-2",children:[(0,b.jsx)("summary",{className:"cursor-pointer select-none text-[10px]",children:"Raw JSON"}),(0,b.jsx)("pre",{className:"mt-2 text-[10px] bg-gray-50 p-2 rounded overflow-auto max-h-60",children:JSON.stringify(f,null,2)})]})]}):(0,b.jsx)("div",{className:"text-gray-500 text-[12px]",children:"Run a request to see results."})]})]})}),n&&(0,b.jsx)("button",{type:"button",onClick:()=>o(null),className:"fixed inset-0 z-50 bg-black/80 flex items-center justify-center p-4",title:"Close",children:(0,b.jsx)("img",{src:n,alt:"Preview",className:"max-w-[95vw] max-h-[95vh] object-contain rounded-md shadow-2xl"})})]})}}];

//# sourceMappingURL=%5Broot-of-the-server%5D__5da9246e._.js.map