module.exports=[18622,(a,b,c)=>{b.exports=a.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},66382,(a,b,c)=>{"use strict";b.exports=a.r(18622)},11755,(a,b,c)=>{"use strict";b.exports=a.r(66382).vendored["react-ssr"].ReactJsxRuntime},80150,(a,b,c)=>{"use strict";b.exports=a.r(66382).vendored["react-ssr"].React},40777,a=>{"use strict";a.s(["default",()=>e],40777);var b=a.i(11755),c=a.i(80150);function d(){let[a,d]=(0,c.useState)("http://localhost:8000/stream/mjpg?fps=15&quality=80"),[e,f]=(0,c.useState)("OAIX_MEDIA_SERVER V.1.0");return(0,b.jsxs)("div",{className:"p-6 space-y-4",children:[(0,b.jsx)("h1",{className:"text-xl font-semibold",children:"Live RTSP"}),(0,b.jsx)("div",{className:"flex gap-2",children:(0,b.jsx)("input",{className:"flex-1 rounded border px-3 py-2",value:e,onChange:a=>d(a.target.value)})}),(0,b.jsx)("div",{className:"rounded-xl overflow-hidden border bg-black max-w-[960px]",children:(0,b.jsx)("img",{src:a,alt:"Live stream",className:"w-full h-auto"})})]})}function e(){let[a,e]=(0,c.useState)("http://localhost:8000/process?save_artifacts=true"),[f,g]=(0,c.useState)(null),[h,i]=(0,c.useState)(""),[j,k]=(0,c.useState)(""),[l,m]=(0,c.useState)(!1),[n,o]=(0,c.useState)(null),p=(0,c.useMemo)(()=>{try{let b=new URL(a);return`${b.protocol}//${b.host}`}catch{return"http://localhost:8000"}},[a]),q=a=>{if(!a)return;let b=a.lastIndexOf("/runs/");if(-1===b)return;let c=a.substring(b+6).replaceAll("\\","/");return`${p}/runs/${c}?t=${Date.now()}`},r=async()=>{m(!0),k(""),g(null),i("");try{let b=await fetch(a,{method:"POST",headers:{"Content-Type":"application/json"}}),c=await b.json();g(c),i(JSON.stringify(c,null,2)),b.ok||k(`HTTP ${b.status}: ${c?.message??"Request failed"}`)}catch(a){k(a?.message??"Request failed")}finally{m(!1)}},s=f?.chosen_detection?.confidence!==void 0?`${Math.round(100*f.chosen_detection.confidence)}%`:"—",t=q(f?.artifacts?.full_frame_path),u=q(f?.artifacts?.crop_path),v=q(f?.artifacts?.final_path);return(0,b.jsxs)("div",{className:"font-sans h-screen overflow-hidden bg-gray-50 text-gray-900",children:[(0,b.jsxs)("div",{className:"px-3 py-2 flex items-center gap-2 border-b",children:[(0,b.jsx)("h1",{className:"text-sm font-semibold mr-2",children:"Medicine OCR Trigger"}),(0,b.jsx)("input",{className:"flex-1 rounded-md border px-2 py-1 text-xs outline-none focus:ring-1 focus:ring-blue-500",type:"text",value:a,onChange:a=>e(a.target.value),placeholder:"http://localhost:8000/process?save_artifacts=true"}),(0,b.jsx)("button",{onClick:r,disabled:l,className:"rounded-md px-3 py-1 text-xs bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-50",children:l?"Processing…":"Submit"})]}),(0,b.jsx)("main",{className:"h-[calc(100vh-40px)] px-3 py-2",children:(0,b.jsxs)("div",{className:"grid grid-cols-12 gap-3 h-full",children:[(0,b.jsxs)("div",{className:"col-span-7 lg:col-span-8 h-full flex flex-col gap-3",children:[(0,b.jsx)("div",{className:"flex-1 rounded-lg border bg-black overflow-hidden",children:(0,b.jsx)(d,{})}),(0,b.jsx)("div",{className:"grid grid-cols-3 gap-3 h-32",children:[{url:t,label:"Full"},{url:u,label:"Crop"},{url:v,label:"Final"}].map(({url:a,label:c})=>(0,b.jsx)("button",{type:"button",onClick:()=>a&&o(a),className:"group rounded-lg border bg-white overflow-hidden flex items-center justify-center",title:c,children:a?(0,b.jsx)("img",{src:a,alt:c,className:"w-full h-full object-contain transition-transform group-hover:scale-[1.02]"}):(0,b.jsxs)("span",{className:"text-[11px] text-gray-500",children:[c,": n/a"]})},c))})]}),(0,b.jsxs)("div",{className:"col-span-5 lg:col-span-4 rounded-lg border bg-white p-3 text-xs leading-tight overflow-hidden",children:[j&&(0,b.jsx)("div",{className:"mb-2 rounded-md bg-red-50 border border-red-200 px-2 py-1 text-red-700",children:j}),f?(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("div",{className:"text-[13px] font-medium",children:"Result"}),(0,b.jsx)("span",{className:"rounded-full bg-gray-100 px-2 py-0.5 text-[11px]",children:f.message})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,b.jsxs)("div",{className:"rounded-md border p-2",children:[(0,b.jsx)("div",{className:"text-[11px] text-gray-500",children:"Detections"}),(0,b.jsx)("div",{className:"text-sm font-semibold",children:f.detections??0})]}),(0,b.jsxs)("div",{className:"rounded-md border p-2",children:[(0,b.jsx)("div",{className:"text-[11px] text-gray-500",children:"Confidence"}),(0,b.jsx)("div",{className:"text-sm font-semibold",children:s})]}),(0,b.jsxs)("div",{className:"rounded-md border p-2 col-span-2",children:[(0,b.jsx)("div",{className:"text-[11px] text-gray-500",children:"Box"}),(0,b.jsx)("div",{className:"font-mono text-[11px]",children:f.chosen_detection?.box?`[${f.chosen_detection.box.join(", ")}]`:"—"})]}),(0,b.jsxs)("div",{className:"rounded-md border p-2",children:[(0,b.jsx)("div",{className:"text-[11px] text-gray-500",children:"Lot"}),(0,b.jsx)("div",{className:"text-sm font-semibold",children:f.result?.lot_number??"—"})]}),(0,b.jsxs)("div",{className:"rounded-md border p-2",children:[(0,b.jsx)("div",{className:"text-[11px] text-gray-500",children:"Expiry"}),(0,b.jsx)("div",{className:"text-sm font-semibold",children:f.result?.expiry_date??"—"})]})]}),(0,b.jsxs)("details",{className:"rounded-md border p-2",children:[(0,b.jsx)("summary",{className:"cursor-pointer select-none text-[11px]",children:"Raw JSON"}),(0,b.jsx)("pre",{className:"mt-2 text-[10px] bg-gray-50 p-2 rounded overflow-auto max-h-40",children:h})]})]}):(0,b.jsx)("div",{className:"text-gray-500 text-[12px]",children:"Run a request to see results."})]})]})}),n&&(0,b.jsx)("button",{type:"button",onClick:()=>o(null),className:"fixed inset-0 z-50 bg-black/80 flex items-center justify-center p-4",title:"Close",children:(0,b.jsx)("img",{src:n,alt:"Preview",className:"max-w-[95vw] max-h-[95vh] object-contain rounded-lg shadow-2xl"})})]})}}];

//# sourceMappingURL=%5Broot-of-the-server%5D__e372b69b._.js.map